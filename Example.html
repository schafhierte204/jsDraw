<!DOCTYPE=html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Line Drawer</title>
        <script src="./jsDraw.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <body>
        <form action="" id="formular">
            <table cellspacing="0">
                <tr align="right" style="border: solid black 10px">
                    <td><input type="button" value="Rectangle" onclick="change(&quot;Rectangle&quot;)"></td>
                    <td><input type="button" value="Circle" onclick="change(&quot;Circle&quot;)"></td>
                </tr>
                <tr align="right" id="Properties">
                    <td>Breite:<input name="dp_w1" type="text" size="5" maxlength="4" value="2">&nbsp;</td>
                    <td>HÃ¶he:<input name="dp_h1" type="text" size="5" maxlength="4" value="2">&nbsp;</td>
                    <td>Farbe:<input name="dp_co" type="color" value="#ff0000"></td>
                    <td>RandBreite:<input name="dp_bw" type="text" size="5" maxlength="4" value="0">&nbsp;</td>
                    <td>RandFarbe:<input name="dp_bcol" type="color" value="#000000"></td>
                    <td>RandAbrundung:<input name="dp_brad" type="text" size="5" maxlength="4" value="0">&nbsp;</td>
                </tr>
                <tr align="right">
                    <td><input type="button" value="remove()" onclick="remove()"></td>
                </tr>
            </table>
        </form>
        <div id="Canvas" style="position:relative;width:100%;height:20000px">
        </div>
        <script type="text/javascript">
            //<!--
            var offset=$("#Canvas").offset()
            $("#Canvas").mousedown(function (e){
                //get mouseposition realtive to canvas
                let x = e.pageX - offset.left;
                let y = e.pageY - offset.top;
                //draw object
                DRAW(x,y);
            })
            var EnRectangle = [0,1,2,3,4,5];
            var EnCircle = [0,2,3,4];
            var myGraph = new Graphics("Canvas", "#0000ff");
            var Properties = document.getElementById("Properties")
            var state = "Rectangle"
            //change tabs(wip)
            function change(result){
                var Pchilds = Array.from(Properties.childNodes).filter(child => child.nodeType==1);
                Pchilds.forEach(e => e.hidden= true)
                state = result
                switch(result){
                    case "Rectangle":
                        for (let i of EnRectangle){
                            Pchilds[i].hidden=false;
                        }
                        break;
                    case "Circle":
                        for(let i of EnCircle){
                            Pchilds[i].hidden=false;
                        }
                        break;
                }
            }

            function DRAW(x,y){
                var f = document.forms[0];

                switch(state){ 
                    case "Rectangle":
                        //Draw Rectangle with properties
                        myGraph.div(x,y,
                            parseInt(f.dp_w1.value), parseInt(f.dp_h1.value),
                            f.dp_co.value, parseInt(f.dp_bw.value), f.dp_bcol.value, parseInt(f.dp_brad.value));
                        break;
                    case "Circle":
                        myGraph.circle( x, y,
                            parseInt(f.dp_w1.value), f.dp_co.value, parseInt(f.dp_bw.value),
                            f.dp_bcol.value);
                        break;
                }
            }
            function remove(){
                myGraph.remove();
            }

            //--!>
        </script>
    </body>
</html>
